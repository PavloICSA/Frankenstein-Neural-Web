<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frankenstein Neural Web</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>âš¡ FRANKENSTEIN NEURAL WEB âš¡</h1>
            <p class="subtitle">Assembly-Powered Neural Network in Your Browser</p>
            <p class="subtitle" id="loadingIndicator" style="margin-top: 10px;">
                <span class="loading-spinner"></span>Initializing WASM module...
            </p>
        </header>

        <!-- Instructions Section -->
        <section class="instructions-section">
            <h2>[ HOW TO USE ]</h2>
            <button class="toggle-instructions" id="toggleInstructions">
                <span class="toggle-icon">â–¼</span> Show Instructions
            </button>
            
            <div class="instructions-content" id="instructionsContent" style="display: none;">
                
                <!-- Pre-loaded Datasets -->
                <div class="instruction-block">
                    <h3>âš¡ Pre-loaded Datasets</h3>
                    <div class="instruction-text">
                        <p><strong>Quick Start with Built-in Datasets:</strong></p>
                        <p>Select from three classic machine learning problems to start experimenting immediately:</p>
                        <ul>
                            <li><strong>XOR Problem:</strong> Classic non-linear classification problem with 2 binary inputs</li>
                            <li><strong>Simple Linear Regression:</strong> Predict continuous values with a linear relationship</li>
                            <li><strong>Iris Setosa Classification:</strong> Binary classification using the famous Iris dataset</li>
                        </ul>
                        <p class="tip">ðŸ’¡ <strong>Tip:</strong> Pre-loaded datasets are perfect for testing different activation functions and network configurations without preparing your own data.</p>
                    </div>
                </div>

                <!-- Data Preparation -->
                <div class="instruction-block">
                    <h3>âš¡ Custom Data Preparation</h3>
                    <div class="instruction-text">
                        <p><strong>CSV Format Requirements:</strong></p>
                        <ul>
                            <li>First row must contain column headers</li>
                            <li>1-10 input features (columns), plus 1 output column</li>
                            <li>Last column is treated as the output/target variable</li>
                            <li>Supports both numeric and categorical (string) data</li>
                            <li>No empty cells - all values must be present</li>
                            <li>Use comma (,) as delimiter</li>
                        </ul>
                        
                        <p><strong>Data Types:</strong></p>
                        <ul>
                            <li><strong>Numeric:</strong> Any decimal or integer values (e.g., 1.5, 42, -3.14)</li>
                            <li><strong>Categorical:</strong> Text labels (e.g., "red", "blue", "yes", "no")</li>
                            <li><strong>Mixed:</strong> Combine both types in the same dataset</li>
                        </ul>
                        
                        <p class="tip">ðŸ’¡ <strong>Tip:</strong> The system automatically detects data types and encodes categorical values as numbers for neural network processing.</p>
                    </div>
                </div>

                <!-- Example Datasets -->
                <div class="instruction-block">
                    <h3>âš¡ Example Datasets</h3>
                    <div class="instruction-text">
                        <p>Download these sample datasets to get started:</p>
                        
                        <div class="example-dataset">
                            <h4>1. Numeric Only - House Prices</h4>
                            <p>Predict house prices based on size and bedrooms.</p>
                            <button class="download-example" data-example="numeric">Download CSV</button>
                            <pre class="code-block">size,bedrooms,price
1200,2,250000
1800,3,350000
2400,4,450000
1500,2,280000
2000,3,380000</pre>
                        </div>
                        
                        <div class="example-dataset">
                            <h4>2. Categorical Only - Fruit Classification</h4>
                            <p>Classify fruits based on color and size.</p>
                            <button class="download-example" data-example="categorical">Download CSV</button>
                            <pre class="code-block">color,size,fruit
red,small,apple
yellow,medium,banana
orange,medium,orange
red,large,apple
yellow,large,banana</pre>
                        </div>
                        
                        <div class="example-dataset">
                            <h4>3. Mixed Data - Customer Purchase Prediction</h4>
                            <p>Predict purchases using age (numeric) and membership (categorical).</p>
                            <button class="download-example" data-example="mixed">Download CSV</button>
                            <pre class="code-block">age,membership,income,purchased
25,bronze,45000,no
35,gold,75000,yes
45,silver,60000,yes
22,bronze,35000,no
50,gold,95000,yes</pre>
                        </div>
                    </div>
                </div>

                <!-- Network Configuration -->
                <div class="instruction-block">
                    <h3>âš¡ Network Configuration</h3>
                    <div class="instruction-text">
                        <p><strong>Customize Your Neural Network:</strong></p>
                        <ul>
                            <li><strong>Activation Function:</strong> Choose between Sigmoid, ReLU, or Tanh
                                <ul>
                                    <li><strong>Sigmoid:</strong> Classic smooth function, good for binary classification (0-1 output)</li>
                                    <li><strong>ReLU:</strong> Fast and efficient, great for deep networks and regression</li>
                                    <li><strong>Tanh:</strong> Similar to sigmoid but outputs range from -1 to 1</li>
                                </ul>
                            </li>
                            <li><strong>Hidden Layer Size:</strong> Adjust from 2 to 20 neurons
                                <ul>
                                    <li>More neurons = more capacity to learn complex patterns</li>
                                    <li>Fewer neurons = faster training, less prone to overfitting</li>
                                    <li>Default: 6 neurons (good starting point for most problems)</li>
                                </ul>
                            </li>
                        </ul>
                        
                        <p class="tip">ðŸ’¡ <strong>Tip:</strong> Try different configurations! ReLU often trains faster, while Sigmoid is better for classification. Increase hidden neurons for complex patterns.</p>
                    </div>
                </div>

                <!-- Training Process -->
                <div class="instruction-block">
                    <h3>âš¡ Training Process</h3>
                    <div class="instruction-text">
                        <p><strong>Step-by-Step Guide:</strong></p>
                        <ol>
                            <li><strong>Load Data:</strong> Select a pre-loaded dataset or upload your own CSV file</li>
                            <li><strong>Configure Network:</strong> Choose activation function and hidden layer size</li>
                            <li><strong>Review Encoding:</strong> Check the data summary showing detected types and encodings</li>
                            <li><strong>Start Training:</strong> Click "Train Neural Core" to begin</li>
                            <li><strong>Monitor Progress:</strong> Watch the loss graph and terminal output in real-time</li>
                            <li><strong>Wait for Completion:</strong> Training completes after 1000 epochs</li>
                        </ol>
                        
                        <p><strong>Understanding Training Visualizations:</strong></p>
                        <ul>
                            <li><strong>Loss Graph:</strong> Real-time plot showing how error decreases over time</li>
                            <li><strong>Loss Value:</strong> Lower is better - should decrease during training</li>
                            <li><strong>Accuracy:</strong> For classification problems, shows percentage of correct predictions</li>
                            <li><strong>Weight Heatmaps:</strong> Visual representation of learned network weights
                                <ul>
                                    <li>Red = positive weights, Blue = negative weights</li>
                                    <li>Brighter colors = stronger connections</li>
                                </ul>
                            </li>
                        </ul>
                        
                        <p class="tip">ðŸ’¡ <strong>Tip:</strong> Good training shows smooth loss decrease. If loss plateaus early, try a different activation function or increase hidden layer size.</p>
                    </div>
                </div>

                <!-- Making Predictions -->
                <div class="instruction-block">
                    <h3>âš¡ Making Predictions</h3>
                    <div class="instruction-text">
                        <p><strong>How to Use the Prediction Interface:</strong></p>
                        <ol>
                            <li><strong>Wait for Training:</strong> Prediction interface appears after training completes</li>
                            <li><strong>Enter Values:</strong> Fill in all input fields with appropriate values</li>
                            <li><strong>Numeric Inputs:</strong> Enter numbers directly (e.g., 1500, 3.5)</li>
                            <li><strong>Categorical Inputs:</strong> Select from dropdown or type known values</li>
                            <li><strong>Click Predict:</strong> Get instant results from the trained network</li>
                        </ol>
                        
                        <p><strong>Understanding Results:</strong></p>
                        <ul>
                            <li><strong>Numeric Output:</strong> Shows the predicted number</li>
                            <li><strong>Categorical Output:</strong> Shows the decoded label (e.g., "yes", "apple")</li>
                            <li><strong>Confidence:</strong> Values closer to 0 or 1 indicate higher confidence</li>
                            <li><strong>Unknown Values:</strong> Warning appears if you enter values not in training data</li>
                        </ul>
                        
                        <p class="tip">ðŸ’¡ <strong>Tip:</strong> For best results, use input values similar to those in your training data. The network learns patterns from the data you provide.</p>
                    </div>
                </div>

                <!-- Technical Details -->
                <div class="instruction-block">
                    <h3>âš¡ Technical Details</h3>
                    <div class="instruction-text">
                        <p><strong>Architecture:</strong></p>
                        <ul>
                            <li>3-layer neural network: Input â†’ Hidden (2-20 neurons) â†’ Output</li>
                            <li>Configurable activation functions: Sigmoid, ReLU, or Tanh</li>
                            <li>Gradient descent optimization with backpropagation</li>
                            <li>Learning rate: 0.1</li>
                            <li>Training: 1000 epochs with real-time visualization</li>
                        </ul>
                        
                        <p><strong>Performance:</strong></p>
                        <ul>
                            <li>Powered by WebAssembly SIMD for fast computation</li>
                            <li>Runs entirely in your browser - no server required</li>
                            <li>All data stays on your device</li>
                            <li>Optimized with x86-64 assembly instructions</li>
                            <li>Real-time loss graphing and weight visualization</li>
                        </ul>
                        
                        <p><strong>Data Encoding:</strong></p>
                        <ul>
                            <li>Categorical values automatically converted to numbers (label encoding)</li>
                            <li>Each unique string gets a sequential integer (0, 1, 2, ...)</li>
                            <li>Encoding is consistent and reversible</li>
                            <li>Numeric values pass through unchanged</li>
                        </ul>
                        
                        <p><strong>Metrics & Visualization:</strong></p>
                        <ul>
                            <li>Loss tracking: Mean Squared Error (MSE) for all problems</li>
                            <li>Accuracy: Percentage correct for classification tasks</li>
                            <li>Interactive loss graph with epoch-by-epoch plotting</li>
                            <li>Weight heatmaps showing learned patterns in the network</li>
                        </ul>
                    </div>
                </div>

            </div>
        </section>

        <main>
            <!-- File Upload Section -->
            <section class="upload-section">
                <h2>[ DATA INJECTION ]</h2>
                
                <!-- Pre-loaded Dataset Selector -->
                <div class="dataset-selector">
                    <h3>Pre-loaded Datasets</h3>
                    <div class="selector-controls">
                        <select id="datasetSelect" class="dataset-dropdown">
                            <option value="">-- Select a dataset --</option>
                            <option value="xor">XOR Problem</option>
                            <option value="linear_regression">Simple Linear Regression</option>
                            <option value="iris_setosa">Iris Setosa Classification</option>
                        </select>
                        <button id="loadDatasetButton" class="action-button secondary-button" disabled>
                            Load Dataset
                        </button>
                    </div>
                    <div id="datasetInfo" class="dataset-info" style="display: none;"></div>
                </div>
                
                <div class="data-source-divider">
                    <span>OR</span>
                </div>
                
                <!-- CSV Upload -->
                <div class="csv-upload">
                    <h3>Upload CSV File</h3>
                    <div class="upload-area" id="uploadArea">
                        <input type="file" id="fileInput" accept=".csv" />
                        <p>Drop CSV file here or click to select</p>
                        <p class="file-hint">Format: x1,x2,...,xN,y (1-10 inputs)</p>
                    </div>
                </div>
                
                <div id="validationMessage" class="message"></div>
            </section>

            <!-- Training Section -->
            <section class="training-section">
                <h2>[ NEURAL CORE ACTIVATION ]</h2>
                
                <!-- Network Configuration Controls -->
                <div id="configControls" class="config-controls" style="display: none;">
                    <h3>Network Configuration</h3>
                    <div class="config-group">
                        <label for="activationSelect">Activation Function:</label>
                        <select id="activationSelect" class="config-select">
                            <option value="0">Sigmoid</option>
                            <option value="1">ReLU</option>
                            <option value="2">Tanh</option>
                        </select>
                    </div>
                    <div class="config-group">
                        <label for="hiddenSizeSlider">Hidden Layer Size: <span id="hiddenSizeValue" class="slider-value">6</span></label>
                        <input type="range" id="hiddenSizeSlider" class="config-slider" min="2" max="20" value="6" step="1">
                    </div>
                </div>
                
                <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 15px;">
                    <button id="trainButton" class="action-button" disabled title="Train the neural network on uploaded data">
                        Train Neural Core
                    </button>
                    <button id="clearButton" class="action-button secondary-button" style="display: none;" title="Clear data and reset to upload new CSV">
                        Clear & Reset
                    </button>
                </div>
                <div id="networkConfig" class="network-config" style="display: none;"></div>
                
                <!-- Loss Graph Visualization -->
                <div id="lossGraphContainer" class="loss-graph-container" style="display: none;">
                    <h3>Training Loss</h3>
                    <canvas id="lossGraphCanvas" width="600" height="300"></canvas>
                    <div id="finalLossDisplay" class="final-loss-display"></div>
                    <div id="accuracyDisplay" class="accuracy-display" style="display: none;"></div>
                </div>
                
                <!-- Weight Heatmap Visualization -->
                <div id="weightHeatmapContainer" class="weight-heatmap-container" style="display: none;">
                    <h3>Network Weights</h3>
                    <div class="heatmap-grid">
                        <div class="heatmap-item">
                            <canvas id="weightsIHCanvas" width="400" height="300"></canvas>
                        </div>
                        <div class="heatmap-item">
                            <canvas id="weightsHOCanvas" width="400" height="300"></canvas>
                        </div>
                    </div>
                </div>
                
                <div id="trainingStatus" class="terminal"></div>
            </section>

            <!-- Prediction Section -->
            <section class="prediction-section" id="predictionSection" style="display: none;">
                <h2>[ INFERENCE ENGINE ]</h2>
                <div id="predictionInputs" class="input-container"></div>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <button id="predictButton" class="action-button" title="Make a prediction using the trained network">
                        Predict
                    </button>
                    <button id="downloadButton" class="action-button secondary-button" title="Download prediction results as CSV">
                        Download Results
                    </button>
                </div>
                <div id="predictionOutput" class="output-display"></div>
            </section>
        </main>

        <footer>
            <nav class="footer-nav">
                <a href="#" id="instructionsLink">Instructions</a>
                <a href="#" id="termsLink">Terms of Service</a>
                <a href="#" id="privacyLink">Privacy Policy</a>
                <a href="#" id="contactLink">Contact</a>
            </nav>
            <p>Powered by x86-64 Assembly + WebAssembly</p>
        </footer>
    </div>

    <!-- Modal Overlay -->
    <div id="modalOverlay" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close" id="modalClose">&times;</button>
            <div id="modalBody"></div>
        </div>
    </div>

    <script src="neurobrain.js"></script>
    <script src="encoder.js"></script>
    <script src="app.js" defer></script>
    <script src="modal-manager.js"></script>
</body>
</html>
